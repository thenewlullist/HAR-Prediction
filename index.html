<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Har-prediction by thenewlullist</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Har-prediction</h1>
        <p></p>

        <p class="view"><a href="https://github.com/thenewlullist/HAR-Prediction">View the Project on GitHub <small>thenewlullist/HAR-Prediction</small></a></p>


        <ul>
          <li><a href="https://github.com/thenewlullist/HAR-Prediction/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/thenewlullist/HAR-Prediction/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/thenewlullist/HAR-Prediction">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>
</p>
<p></p>

<div>
<div>
<h1>
<a name="har-human-activity-recognition-prediction-using-a-random-forest-trained-model" class="anchor" href="#har-human-activity-recognition-prediction-using-a-random-forest-trained-model"><span class="octicon octicon-link"></span></a>HAR (Human Activity Recognition) Prediction using a Random Forest trained model</h1>
<p>This analysis makes use of the Weight Lifting Excersise Dataset generated by . The dataset tracks subjects doing simple bicep curls which are tracked by electronic accelerometers in equipment on their waist, arm and dumbell. The goal of this data is to see whether a learning algorithm can differentiate proper vs. improper form which can fall into 5 alphabetic classifications. We will attempt a model using the Random Forest (“rf”) method from the caret() package in R.</p>
<p>The Data files are split into Training and Testing .csv files. We will begin with the training data and split it into a smaller training/testing set with a 60/40 ratio.</p>
<pre><code>require(caret);require(randomForest)</code></pre>
<pre><code>## Loading required package: caret
## Loading required package: lattice
## Loading required package: ggplot2
## Loading required package: randomForest
## randomForest 4.6-10
## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>set.seed(363)
pmltraining&lt;-read.csv("pml-training.csv")
inTrain&lt;-createDataPartition(y=pmltraining$classe, p=0.6, list=F)
train&lt;-pmltraining[inTrain,]
test&lt;-pmltraining[-inTrain,]</code></pre>
<pre><code>summary(train)
is.na(train)</code></pre>
<p>Cursory analysis reveals 11,539 rows with NAs across the majority of features (columns). Using summary() we can visibly select which features are without NAs to include as covariates in our model. The column names will be put into a regex string.</p>
<pre><code>selec&lt;-c("roll_belt|pitch_belt|yaw_belt|total_accel_belt|gyros_belt_x|gyros_belt_y|gyros_belt_z|accel_belt_x|accel_belt_y|accel_belt_z|magnet_belt_x|magnet_belt_y|magnet_belt_z|roll_arm|pitch_arm|yaw_arm|total_accel_arm|gyros_arm_x|gyros_arm_y|gyros_arm_z|accel_arm_x|accel_arm_y|accel_arm_z|magnet_arm_x|magnet_arm_y|magnet_arm_z|roll_dumbbell|pitch_dumbbell|yaw_dumbbell|total_accel_dumbbell|gyros_dumbbell_x|gyros_dumbbell_y|gyros_dumbbell_z|accel_dumbbell_x|accel_dumbbell_y|accel_dumbbell_z|magnet_dumbbell_x|magnet_dumbbell_y|magnet_dumbbell_z|roll_forearm|pitch_forearm|yaw_forearm|total_accel_forearm|gyros_forearm_x|gyros_forearm_y|gyros_forearm_z|accel_forearm_x|accel_forearm_y|accel_forearm_z|magnet_forearm_x|magnet_forearm_y|magnet_forearm_z|classe")</code></pre>
<p>52 variables will serve as covariates.</p>
<pre><code>sel&lt;-grep(selec,colnames(train))
trai&lt;-train[,sel]
tes&lt;-test[,sel]
na&lt;-c(5:27,41:49,59:71,75:87,89:97,110:122,124:132)
sel&lt;-sel[-na]
trai&lt;-train[,sel]
tes&lt;-test[,sel]</code></pre>
<p>The covariates are compared with the ‘classe’ variable which categorizes how the excercise was performed. We will asses the accuracy of the Random Forest model using 20-fold Cross Validation. Ideally our out of sample error rate should be &gt;0.02 for effective prediction power.</p>
<pre><code> modfit&lt;-train(classe ~.,data=trai,method="rf",trControl=trainControl(method="cv",number=20,allowParallel=TRUE,verboseIter=TRUE))
modfit
modfit$finalModel
###
Random Forest
11776 samples
52 predictors
5 classes: 'A', 'B', 'C', 'D', 'E'
No pre-processing
Resampling: Cross-Validated (20 fold)
Summary of sample sizes: 11187, 11186, 11186, 11187, 11188, 11188, ...
Resampling results across tuning parameters:
mtry Accuracy Kappa Accuracy SD Kappa SD
2 0.991 0.988 0.00485 0.00614
27 0.99 0.988 0.00558 0.00707
52 0.979 0.974 0.00615 0.00778
Accuracy was used to select the optimal model using the largest value.
The final value used for the model was mtry = 2.
###
Call:
randomForest(x = x, y = y, mtry = param$mtry)
Type of random forest: classification
Number of trees: 500
No. of variables tried at each split: 2
OOB estimate of error rate: 0.9%
Confusion matrix:
A B C D E class.error
A 3345 3 0 0 0 0.0008960573
B 18 2253 8 0 0 0.0114085125
C 0 20 2030 3 1 0.0116845180
D 0 0 45 1884 1 0.0238341969
E 0 0 2 5 2158 0.0032332564</code></pre>
<p>With a high rate of accuracy, the prediction model (rows) is now compared with the actual classifications(columns) of the ‘test’ partition in a Confusion Matrix.</p>
<pre><code> confusionMatrix(predict(modfit,newdata=tes),tes$classe)
###
Confusion Matrix and Statistics
Reference
Prediction A B C D E
A 2231 8 0 0 0
B 1 1503 9 0 0
C 0 7 1356 30 7
D 0 0 3 1256 8
E 0 0 0 0 1427
Overall Statistics
Accuracy : 0.9907
95% CI : (0.9883, 0.9927)
No Information Rate : 0.2845
P-Value [Acc &gt; NIR] : &lt; 2.2e-16</code></pre>
</div>

<p></p>
</div>

<p>
</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/thenewlullist">thenewlullist</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
